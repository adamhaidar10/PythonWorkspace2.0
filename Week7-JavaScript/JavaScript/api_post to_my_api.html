<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>
        Posting to an API
    </h1>

    <script>
        async function post_to_api()
        {
            // data to be posted
            var f = "lychees";
            var q = 10000;

            // create a new URL with the API endpoint
            var u = new URL("http://4.234.129.89:8000/fruit");

            // create a JSON structure from the data
            var j = {fruitname: "lychees", fruitqty: 10000};
            var s = JSON.stringify(j);
            console.log(s);

            // call the API - note the method is POST
            // and the body of the request is the JSON data but converted to a string
            // also add the content-type header to tell the server what type of data to expect
            var res = await fetch(u, {method: "POST", body: s, headers: {"Content-type": "application/json"}});

            // extract the JSON of the response and post it on the console
            var k = await res.json();
            console.log(k);
        }
    </script>

    <input type="button" value="Click me" onclick="post_to_api();">

</body>
</html>